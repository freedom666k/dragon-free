.<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - DRAGON COIN</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Cairo',sans-serif;transition:0.3s;}
body{background-color:#0d1117;color:#fff;min-height:100vh;display:flex;flex-direction:column;align-items:center;padding:20px;}
.container{background-color:#161b22;padding:30px;border-radius:15px;width:90%;max-width:500px;text-align:center;box-shadow:0 0 15px rgba(0,0,0,0.4);border:1px solid #30363d;margin-bottom:20px;}
h1{color:#ff5555;margin-bottom:20px;}
button{width:100%;padding:12px;background-color:#ff5555;color:#fff;border:none;border-radius:8px;font-size:16px;cursor:pointer;margin:10px 0;}
button:hover{background-color:#cc4444;}
.toggle,.langBtn{background-color:#21262d;margin-top:10px;color:#fff;}
.toggle:hover,.langBtn:hover{background-color:#30363d;}
.light-mode{background-color:#f4f4f4;color:#000;}
.light-mode .container{background-color:#fff;border-color:#ccc;color:#000;}
.light-mode button{background-color:#ff5555;color:#fff;}
.light-mode .toggle,.light-mode .langBtn{background-color:#ddd;color:#000;}
.light-mode h1{color:#ff5555;}
#captchaOverlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);display:flex;justify-content:center;align-items:center;z-index:9999;}
#captchaOverlay div{background:#161b22;padding:30px;border-radius:15px;text-align:center;max-width:350px;width:90%;color:#fff;}
#captchaOverlay input{width:100%;padding:10px;border:none;border-radius:5px;margin:10px 0;background:#21262d;color:#fff;}
#captchaOverlay input:focus{outline:none;border:1px solid #ff5555;}
#captchaOverlay button{width:100%;padding:10px;background:#ff5555;color:#fff;border:none;border-radius:5px;margin-top:5px;}
#captchaOverlay button:hover{background:#cc4444;}
</style>
</head>
<body>

<div class="container">
  <h1 id="welcomeText">Ù…Ø±Ø­Ø¨Ø§ <span id="userDisplay"></span>!</h1>
  <p id="balanceText">Ø±ØµÙŠØ¯Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ: <span id="balance">0</span> DRAGON COIN</p>
  <button id="dailyBtn" onclick="addCoins()">ğŸ’° Ù‡Ø¯ÙŠØ© ÙŠÙˆÙ…ÙŠØ© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©</button>
  <button id="transferBtn" onclick="transfer()">ğŸ’¸ ØªØ­ÙˆÙŠÙ„ Ø¹Ù…Ù„Ø©</button>
  <button id="storeBtn" onclick="openStore()">ğŸª Ù…ØªØ¬Ø±</button>
  <button onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
  <button class="toggle" onclick="toggleMode()">ğŸŒ™ / â˜€ï¸</button>
  <button class="langBtn" onclick="toggleLanguage()">Ø¹ / E</button>
</div>

<!-- Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±ÙˆØ¨ÙˆØª -->
<div id="captchaOverlay">
  <div>
    <h2 id="captchaTitle">Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù†Ùƒ Ù„Ø³Øª Ø±ÙˆØ¨ÙˆØª</h2>
    <p id="captchaQuestion">Ù…Ø§ Ù‡Ùˆ 5 + 3 ØŸ</p>
    <input type="text" id="captchaAnswer" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©">
    <button onclick="verifyCaptcha()">ØªØ­Ù‚Ù‚</button>
  </div>
</div>

<script>
// Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†
let darkMode = localStorage.getItem('darkMode')==='true';
applyMode();

// Ø§Ù„Ù„ØºØ©
let lang = localStorage.getItem('lang') || 'ar';
applyLanguage();

// Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
const username = localStorage.getItem('username');
if(!username || localStorage.getItem('loggedIn')!=='true'){
  alert('âŒ Ù„Ù… ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„!');
  window.location.href = "login.html";
}
document.getElementById('userDisplay').textContent = username;

// ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø±ØµÙŠØ¯
let balances = JSON.parse(localStorage.getItem('balances')||'{}');
if(!balances[username]) balances[username]=0;
updateBalance();

// Ù‡Ø¯Ø§ÙŠØ§ ÙŠÙˆÙ…ÙŠØ©
function addCoins(){
  const amount=(Math.random()*0.5+0.5).toFixed(2);
  balances[username]+=parseFloat(amount);
  localStorage.setItem('balances',JSON.stringify(balances));
  updateBalance();
  alert((lang==='ar'?'ğŸ Ø­ØµÙ„Øª Ø¹Ù„Ù‰ ':'ğŸ You received ')+amount+' DRAGON COIN');
}

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±ØµÙŠØ¯
function updateBalance(){document.getElementById('balance').textContent=balances[username].toFixed(2);}

// ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø©
function transfer(){
  const target=prompt(lang==='ar'?'Ø§Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø³ØªÙ„Ù…:':'Enter recipient username:');
  if(!target){alert(lang==='ar'?'Ø§Ù„Ø§Ø³Ù… Ù†Ø§Ù‚Øµ':'Name missing');return;}
  const amt=parseFloat(prompt(lang==='ar'?'Ø§Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº:':'Enter amount:'));
  if(isNaN(amt)||amt<=0){alert(lang==='ar'?'Ø§Ù„Ù…Ø¨Ù„Øº ØºÙŠØ± ØµØ­ÙŠØ­':'Invalid amount');return;}
  if(amt>balances[username]){alert(lang==='ar'?'Ø±ØµÙŠØ¯Ùƒ ØºÙŠØ± ÙƒØ§ÙÙŠ':'Insufficient balance');return;}
  let bal=JSON.parse(localStorage.getItem('balances')||'{}');
  if(!bal[target]) bal[target]=0;
  bal[username]-=amt;
  bal[target]+=amt;
  localStorage.setItem('balances',JSON.stringify(bal));
  balances=bal;
  updateBalance();
  alert((lang==='ar'?'âœ… ØªÙ… ØªØ­ÙˆÙŠÙ„ ':'âœ… Transferred ')+amt+' DRAGON COIN Ø¥Ù„Ù‰ '+target);
}

// Ù…ØªØ¬Ø±
function openStore(){alert(lang==='ar'?'ğŸª Ø§Ù„Ù…ØªØ¬Ø± Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±':'ğŸª Store under development');}

// ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬
function logout(){
  localStorage.removeItem('loggedIn');
  localStorage.removeItem('username');
  localStorage.removeItem('rememberedUser');
  window.location.href="login.html";
}

// ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹
function toggleMode(){darkMode=!darkMode;localStorage.setItem('darkMode',darkMode);applyMode();}
function applyMode(){if(darkMode){document.body.classList.remove('light-mode');}else{document.body.classList.add('light-mode');}}

// ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ©
function toggleLanguage(){lang=(lang==='ar')?'en':'ar';localStorage.setItem('lang',lang);applyLanguage();}
function applyLanguage(){
  if(lang==='ar'){
    document.getElementById('welcomeText').innerHTML=`Ù…Ø±Ø­Ø¨Ø§ <span id="userDisplay">${username}</span>!`;
    document.getElementById('balanceText').innerHTML=`Ø±ØµÙŠØ¯Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ: <span id="balance">${balances[username].toFixed(2)}</span> DRAGON COIN`;
    document.getElementById('dailyBtn').textContent='ğŸ’° Ù‡Ø¯ÙŠØ© ÙŠÙˆÙ…ÙŠØ© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©';
    document.getElementById('transferBtn').textContent='ğŸ’¸ ØªØ­ÙˆÙŠÙ„ Ø¹Ù…Ù„Ø©';
    document.getElementById('storeBtn').textContent='ğŸª Ù…ØªØ¬Ø±';
  } else {
    document.getElementById('welcomeText').innerHTML=`Welcome <span id="userDisplay">${username}</span>!`;
    document.getElementById('balanceText').innerHTML=`Balance: <span id="balance">${balances[username].toFixed(2)}</span> DRAGON COIN`;
    document.getElementById('dailyBtn').textContent='ğŸ’° Daily Random Gift';
    document.getElementById('transferBtn').textContent='ğŸ’¸ Transfer Coins';
    document.getElementById('storeBtn').textContent='ğŸª Store';
  }
}

// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±ÙˆØ¨ÙˆØª
let captchaCorrectAnswer = 8; // 5+3
function verifyCaptcha(){
  const ans = parseInt(document.getElementById('captchaAnswer').value);
  if(ans === captchaCorrectAnswer){
    document.getElementById('captchaOverlay').style.display='none';
  } else {
    alert('âŒ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© ØºÙŠØ± ØµØ­ÙŠØ­Ø© Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰!');
  }
}
</script>
</body>
</html>