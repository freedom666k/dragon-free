<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DRAGON COIN</title>
<style>
  body {
    font-family: 'Cairo', sans-serif;
    background-color: #0d1117;
    color: #c9d1d9;
    text-align: center;
    transition: background 0.3s, color 0.3s;
  }
  header {
    background: #161b22;
    padding: 15px;
    font-size: 22px;
    color: #58a6ff;
    box-shadow: 0 0 10px rgba(0,0,0,0.4);
  }
  main {
    margin-top: 40px;
  }
  input {
    padding: 10px;
    border-radius: 10px;
    border: none;
    margin: 5px;
    text-align: center;
  }
  button {
    background: #238636;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 12px;
    margin: 10px;
    cursor: pointer;
    transition: background 0.3s;
  }
  button:hover {
    background: #2ea043;
  }
  .dark {
    background-color: #f0f6fc;
    color: #0d1117;
  }
  .btns {
    margin-top: 30px;
  }
</style>
</head>
<body>

<header id="title">ğŸ‰ DRAGON COIN</header>

<main>
  <div id="login">
    <h2 id="loginTitle">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
    <input type="text" id="username" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"><br>
    <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±"><br>
    <button id="loginBtn" onclick="login()">Ø¯Ø®ÙˆÙ„</button>
    <button id="registerBtn" onclick="register()">ØªØ³Ø¬ÙŠÙ„ Ø¬Ø¯ÙŠØ¯</button>
  </div>

  <div id="main" style="display:none;">
    <h2 id="welcome">Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ <span id="userDisplay"></span></h2>
    <p id="balanceText">Ø±ØµÙŠØ¯Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ: <span id="balance">0</span> ğŸª™ DRG</p>

    <div class="btns">
      <input type="text" id="toUser" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªÙ„Ù…">
      <input type="number" id="amount" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº">
      <button id="transferBtn" onclick="transfer()">ØªØ­ÙˆÙŠÙ„</button><br>

      <button id="giftBtn" onclick="dailyGift()">ğŸ Ø§Ù„Ù‡Ø¯ÙŠØ© Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</button>
    </div>

    <div class="btns">
      <button id="darkBtn" onclick="toggleDarkMode()">ğŸŒ“ ÙˆØ¶Ø¹ Ø¯Ø§ÙƒÙ†</button>
      <button onclick="toggleLang()">ğŸŒ <span id="langBtn">Ø¹</span></button>
      <button id="homeBtn" onclick="location.href='index.html'">ğŸ  Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</button>
    </div>
  </div>
</main>

<script>
let data = JSON.parse(localStorage.getItem('dragon_users') || '{}');
let currentUser = null;
let dark = false;
let lang = 'ar';

// Ø§Ù„ØªØ±Ø¬Ù…Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø©
const t = {
  ar: {
    title: "ğŸ‰ DRAGON COIN",
    loginTitle: "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„",
    username: "Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",
    password: "ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±",
    loginBtn: "Ø¯Ø®ÙˆÙ„",
    registerBtn: "ØªØ³Ø¬ÙŠÙ„ Ø¬Ø¯ÙŠØ¯",
    welcome: "Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ ",
    balanceText: "Ø±ØµÙŠØ¯Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ:",
    toUser: "Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªÙ„Ù…",
    amount: "Ø§Ù„Ù…Ø¨Ù„Øº",
    transferBtn: "ØªØ­ÙˆÙŠÙ„",
    giftBtn: "ğŸ Ø§Ù„Ù‡Ø¯ÙŠØ© Ø§Ù„ÙŠÙˆÙ…ÙŠØ©",
    darkBtn: "ğŸŒ“ ÙˆØ¶Ø¹ Ø¯Ø§ÙƒÙ†",
    homeBtn: "ğŸ  Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ",
    errors: {
      userNotFound: "Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯.",
      wrongPass: "ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø®Ø§Ø·Ø¦Ø©.",
      empty: "Ø£Ø¯Ø®Ù„ Ø§Ù„Ø§Ø³Ù… ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±.",
      userExists: "Ø§Ù„Ø§Ø³Ù… Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ÙØ¹Ù„.",
      wrongData: "Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ­ÙŠØ­Ø©.",
      toMissing: "Ø§Ù„Ù…Ø³ØªÙ„Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯.",
      notEnough: "Ø±ØµÙŠØ¯Ùƒ ØºÙŠØ± ÙƒØ§ÙÙ.",
      gifted: "Ù„Ù‚Ø¯ Ø£Ø®Ø°Øª Ø§Ù„Ù‡Ø¯ÙŠØ© Ø§Ù„ÙŠÙˆÙ….",
      giftReceived: "ğŸ Ø­ØµÙ„Øª Ø¹Ù„Ù‰ ",
      successTransfer: "ØªÙ… Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­.",
      successRegister: "ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­."
    }
  },
  en: {
    title: "ğŸ‰ DRAGON COIN",
    loginTitle: "Login",
    username: "Username",
    password: "Password",
    loginBtn: "Login",
    registerBtn: "Register",
    welcome: "Welcome, ",
    balanceText: "Your balance:",
    toUser: "Recipient username",
    amount: "Amount",
    transferBtn: "Transfer",
    giftBtn: "ğŸ Daily Gift",
    darkBtn: "ğŸŒ“ Dark Mode",
    homeBtn: "ğŸ  Back to Main Site",
    errors: {
      userNotFound: "User not found.",
      wrongPass: "Incorrect password.",
      empty: "Enter username and password.",
      userExists: "Username already exists.",
      wrongData: "Invalid data.",
      toMissing: "Recipient not found.",
      notEnough: "Insufficient balance.",
      gifted: "You already claimed your daily gift.",
      giftReceived: "ğŸ You received ",
      successTransfer: "Transfer successful.",
      successRegister: "Registered successfully."
    }
  }
};

function saveData() {
  localStorage.setItem('dragon_users', JSON.stringify(data));
}

function applyLang() {
  const L = t[lang];
  document.getElementById('title').textContent = L.title;
  document.getElementById('loginTitle').textContent = L.loginTitle;
  document.getElementById('username').placeholder = L.username;
  document.getElementById('password').placeholder = L.password;
  document.getElementById('loginBtn').textContent = L.loginBtn;
  document.getElementById('registerBtn').textContent = L.registerBtn;
  document.getElementById('balanceText').firstChild.textContent = L.balanceText + ' ';
  document.getElementById('toUser').placeholder = L.toUser;
  document.getElementById('amount').placeholder = L.amount;
  document.getElementById('transferBtn').textContent = L.transferBtn;
  document.getElementById('giftBtn').textContent = L.giftBtn;
  document.getElementById('darkBtn').textContent = L.darkBtn;
  document.getElementById('homeBtn').textContent = L.homeBtn;
  document.getElementById('langBtn').textContent = lang === 'ar' ? 'Ø¹' : 'E';
}

function toggleLang() {
  lang = lang === 'ar' ? 'en' : 'ar';
  applyLang();
}

function login() {
  const u = username.value.trim();
  const p = password.value.trim();
  const L = t[lang].errors;
  if (!data[u]) return alert(L.userNotFound);
  if (data[u].password !== p) return alert(L.wrongPass);
  currentUser = u;
  openMain();
}

function register() {
  const u = username.value.trim();
  const p = password.value.trim();
  const L = t[lang].errors;
  if (!u || !p) return alert(L.empty);
  if (data[u]) return alert(L.userExists);
  data[u] = { password: p, balance: 0, lastGift: 0 };
  saveData();
  alert(L.successRegister);
}

function openMain() {
  login.style.display = 'none';
  main.style.display = 'block';
  userDisplay.textContent = currentUser;
  updateBalance();
  applyLang();
}

function updateBalance() {
  balance.textContent = data[currentUser].balance.toFixed(2);
}

function transfer() {
  const to = toUser.value.trim();
  const amt = parseFloat(amount.value);
  const L = t[lang].errors;
  if (!to || isNaN(amt) || amt <= 0) return alert(L.wrongData);
  if (!data[to]) return alert(L.toMissing);
  if (data[currentUser].balance < amt) return alert(L.notEnough);
  data[currentUser].balance -= amt;
  data[to].balance += amt;
  saveData();
  updateBalance();
  alert(L.successTransfer);
}

function dailyGift() {
  const now = Date.now();
  const diff = now - data[currentUser].lastGift;
  const L = t[lang].errors;
  if (diff < 86400000) return alert(L.gifted);
  const gift = (Math.random() * 0.5 + 0.5).toFixed(2);
  data[currentUser].balance += parseFloat(gift);
  data[currentUser].lastGift = now;
  saveData();
  updateBalance();
  alert(L.giftReceived + gift + ' DRG');
}

function toggleDarkMode() {
  dark = !dark;
  document.body.classList.toggle('dark', dark);
}

applyLang();
</script>

</body>
</html>