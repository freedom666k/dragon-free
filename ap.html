<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ØªØ­Ù„ÙŠÙ„ Ø¨ÙˆØª Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯ - ÙƒØ´Ù ÙƒÙ„ Ø§Ù„Ù„ÙŠ Ù†Ù‚Ø¯Ø± Ù†ÙƒØ´ÙÙ‡</title>
<style>
  :root{--red:#e74c3c;--red-dark:#c0392b;--bg:#0f0f10;--card:#171717;--muted:#aaa}
  body{font-family:system-ui,Arial; background:var(--bg); color:#fff; margin:0; padding:20px; direction:rtl}
  .wrap{max-width:920px;margin:18px auto}
  h1{margin:6px 0 12px;font-size:20px}
  .row{display:flex;gap:10px;flex-wrap:wrap}
  input,select,button,textarea{padding:10px;border-radius:8px;border:0;background:#111;color:#fff;min-height:44px}
  input[placeholder]{color:var(--muted)}
  button{background:var(--red);cursor:pointer}
  button:hover{background:var(--red-dark)}
  .card{background:var(--card);padding:14px;border-radius:12px;margin-top:12px}
  pre{white-space:pre-wrap;color:#ddd;background:transparent;margin:8px 0}
  img.avatar{width:96px;height:96px;border-radius:50%;display:block;margin:10px auto}
  .success{color:#9fe29f} .fail{color:#ff9b9b}
  .small{font-size:13px;color:var(--muted)}
  .flex-between{display:flex;justify-content:space-between;align-items:center}
  .wrap-controls{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:8px}
  label.small{display:block;margin-top:6px;color:var(--muted)}
</style>
</head>
<body>
<div class="wrap">
  <h1>ğŸ” ØªØ­Ù„ÙŠÙ„ Ø¨ÙˆØª Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯ â€” ÙƒØ´Ù ÙƒÙ„ Ù…Ø§ ÙŠÙ…ÙƒÙ† ÙƒØ´ÙÙ‡</h1>

  <div class="card">
    <div class="row wrap-controls">
      <input id="token" placeholder="Ø¶Ø¹ ØªÙˆÙƒÙ† Ø§Ù„Ø¨ÙˆØª Ù‡Ù†Ø§ (Token)" style="flex:1">
      <input id="guildId" placeholder="Ø§Ø®ØªÙŠØ§Ø±ÙŠ â€” Guild ID Ù„Ù„ÙƒØ´Ù Ø¹Ù† Ø§Ù„Ø¨Ø±ÙŠÙÙƒØ³ (Ù„Ùˆ Ø¹Ù†Ø¯Ùƒ)" style="width:220px">
      <input id="channelId" placeholder="Ø§Ø®ØªÙŠØ§Ø±ÙŠ â€” Channel ID Ù„Ø¥Ø±Ø³Ø§Ù„ Ù…Ø­Ø§ÙˆÙ„Ø§Øª (Ù„Ùˆ Ø¹Ù†Ø¯Ùƒ)" style="width:220px">
      <button id="btnAnalyze">ğŸ” Ø§Ø¨Ø¯Ø£ Ø§Ù„ÙƒØ´Ù</button>
      <button id="btnTheme">ğŸŒ™/â˜€ï¸</button>
      <button id="btnHome" onclick="location.href='index.html'">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
    </div>
    <div class="small">Ù…Ù„Ø§Ø­Ø¸Ø©: Ø§Ù„Ø®Ø¯Ù…Ø© ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ ØªÙˆÙƒÙ† Ø§Ù„Ø¨ÙˆØª. Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ØªÙˆÙƒÙ† ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­ ÙŠØ³Ø±Ù‘Ø¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ù„ÙƒÙ† ØºÙŠØ± Ù…Ø³ØªØ­Ø³Ù† Ù„Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ø­ÙŠØ© â€” Ø§Ù„Ø£ÙØ¶Ù„ ØªØ¹Ù…Ù„ backend Ø¢Ù…Ù†.</div>
  </div>

  <div id="results" style="display:none">
    <div class="card">
      <div class="flex-between">
        <div>
          <img id="avatar" class="avatar" src="" alt="avatar">
        </div>
        <div style="flex:1;margin-right:12px;text-align:right">
          <h2 id="botName">...</h2>
          <div id="botId" class="small">ID: ...</div>
          <div id="verified" class="small">Ù…ÙˆØ«Ù‘Ù‚: ...</div>
          <div id="guildsCount" class="small">Ø¹Ø¯Ø¯ Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª: ...</div>
          <div id="prefix" class="small">Ø¨Ø±ÙŠÙÙƒØ³ (Ù…ÙƒØªØ´Ù/ØªÙ‚Ø¯ÙŠØ±ÙŠ): ...</div>
        </div>
      </div>
    </div>

    <div id="cardsArea">
      <div class="card">
        <h3>ğŸ“¦ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø£Ø³Ø§Ø³ÙŠØ© (API responses)</h3>
        <pre id="rawUser">-</pre>
      </div>

      <div class="card">
        <h3>ğŸ§­ Gateway / Rate Limits</h3>
        <pre id="gateway">-</pre>
      </div>

      <div class="card">
        <h3>ğŸ› ï¸ Slash Commands Ø§Ù„Ù…Ø³Ø¬Ù„Ø©</h3>
        <pre id="commands">-</pre>
      </div>

      <div class="card">
        <h3>ğŸ” Ù…Ø­Ø§ÙˆÙ„Ø© ÙƒØ´Ù Ø§Ù„Ø¨Ø±ÙŠÙÙƒØ³ (ØªÙ„Ù‚Ø§Ø¦ÙŠ)</h3>
        <div class="small">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ÙƒØ´Ù: ÙŠØ±Ø³Ù„ Ø±Ø³Ø§Ø¦Ù„ ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ù†Ø§Ø© (Ù…Ø·Ù„ÙˆØ¨ Channel ID ÙˆØµÙ„Ø§Ø­ÙŠØ§Øª Ø¥Ø±Ø³Ø§Ù„/Ù‚Ø±Ø§Ø¡Ø©). Ø¥Ø°Ø§ Ø±Ø¯ Ø§Ù„Ø¨ÙˆØª Ø§Ù„Ù‡Ø¯Ù Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¨Ø±ÙŠÙÙƒØ³.</div>
        <pre id="prefixResult">Ù„Ù… ØªØ¨Ø¯Ø£ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø¨Ø¹Ø¯.</pre>
      </div>

      <div class="card">
        <h3>ğŸ§¾ Application / Owner / Flags (Ø¥Ù† ÙˆÙØ¬Ø¯Øª)</h3>
        <pre id="appInfo">-</pre>
      </div>

      <div class="card">
        <h3>ğŸ® ØªØ¬Ø±Ø¨Ø© Ø£ÙˆØ§Ù…Ø± (Ø¹Ø±Ø¶ Ø§Ù„ÙˆØµÙ Ø£Ùˆ Ø±Ø¯ÙˆØ¯ Slash ÙÙ‚Ø·)</h3>
        <div class="small">Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø£Ù…Ø± (Ù…Ø³Ø¨Ù‚Ø§Ù‹ Ù…Ù† Ù‚Ø§Ø¦Ù…Ø© Slash) Ù„ØªØ¹Ø±Ø¶ Ø§Ù„ÙˆØµÙ Ø£Ùˆ ØªØ­Ø§ÙƒÙŠ Ø§Ù„ØªØ´ØºÙŠÙ„.</div>
        <input id="cmdInput" placeholder="/help Ø£Ùˆ /ping" style="width:70%">
        <button onclick="runCmd()">ØªØ´ØºÙŠÙ„ / Ø§Ø¸Ù‡Ø§Ø±</button>
        <pre id="cmdOutput">-</pre>
      </div>
    </div>
  </div>

  <div class="card small" id="notes">
    <strong>Ù…Ù„Ø§Ø­Ø¸Ø§Øª ØªÙ‚Ù†ÙŠØ© ÙˆØ³Ù„Ø§Ù…Ø© (Ø§Ù‚Ø±Ø£):</strong>
    <ul>
      <li>Discord API ØªÙ…Ù†Ø¹ Ø§Ù„ÙˆØµÙˆÙ„ Ù…Ù† Ø¨Ø¹Ø¶ Ø§Ù„Ù…ØªØµÙØ­Ø§Øª Ø¨Ø³Ø¨Ø¨ Ø³ÙŠØ§Ø³Ø§Øª CORS â€” Ù„Ùˆ ÙˆØ§Ø¬Ù‡Øª Ø£Ø®Ø·Ø§Ø¡ CORSØŒ Ø´ØºÙ‘Ù„ Ù†ÙØ³ Ø§Ù„ÙƒÙˆØ¯ Ø¹Ù„Ù‰ backend (Express) Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… Replit/ÙˆØ¸ÙŠÙØ© Ø³ÙŠØ±ÙØ±ÙŠØ©.</li>
      <li>Ù„Ø§ ØªØ´Ø§Ø±Ùƒ ØªÙˆÙƒÙ† Ø§Ù„Ø¨ÙˆØª Ù…Ø¹ Ø£Ø­Ø¯. Ø§Ù„Ø£ÙØ¶Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‡Ø°Ø§ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¹Ù„Ù‰ Ø¨ÙˆØª ØªØ¬Ø±ÙŠØ¨ÙŠ Ø£Ùˆ Ø¹Ø¨Ø± backend Ø¢Ù…Ù†.</li>
      <li>Ø¹Ù…Ù„ÙŠØ© ÙƒØ´Ù Ø§Ù„Ø¨Ø±ÙŠÙÙƒØ³ Ø¨Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ø¦Ù„ Ù‚Ø¯ ØªØªØ±Ùƒ Ø³Ø¬Ù„Ø§Ù‹ ÙÙŠ Ø§Ù„Ù‚Ù†Ø§Ø© â€” ÙŠÙ…ÙƒÙ†Ùƒ Ø­Ø°Ù Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª ÙÙŠ Ø§Ù„Ø³ÙƒØ±Ø¨Øª Ù„Ùˆ Ø£Ø±Ø¯Øª.</li>
    </ul>
  </div>
</div>

<script>
const el = id => document.getElementById(id);
const tryPrefixes = ['!','/','?','.','-','~','$','>','++','r!','_','%','^']; // Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØ¹Ø¯ÙŠÙ„
const tryCommands = ['help','ping','info','bot','commands','menu','start'];

document.getElementById('btnAnalyze').onclick = analyze;
document.getElementById('btnTheme').onclick = () => document.body.classList.toggle('light');

async function analyze(){
  resetUI();
  const token = el('token').value.trim();
  if(!token){ alert('Ø­Ø· ØªÙˆÙƒÙ† Ø§Ù„Ø¨ÙˆØª'); return; }
  el('results').style.display='block';

  // 1) users/@me
  let user;
  try {
    const res = await fetch('https://discord.com/api/v10/users/@me', { headers: { Authorization: 'Bot '+token }});
    if(!res.ok) throw new Error('users/@me => '+res.status+' '+res.statusText);
    user = await res.json();
    el('rawUser').textContent = JSON.stringify(user,null,2);
    el('botName').textContent = `${user.username}#${user.discriminator || '0000'}`;
    el('botId').textContent = `ID: ${user.id}`;
    el('avatar').src = user.avatar ? `https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png?size=256` : '';
    el('verified').textContent = 'Ù…ÙˆØ«Ù‘Ù‚: ' + (user.verified ? 'âœ… Ù†Ø¹Ù…' : 'âŒ Ù„Ø§');
  } catch(err){
    el('rawUser').textContent = 'ÙØ´Ù„ Ø¬Ù„Ø¨ users/@me: '+err;
    return;
  }

  // 2) users/@me/guilds => Ø¹Ø¯Ø¯ Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª (Ù…Ù…ÙƒÙ† paginated)
  try {
    const res = await fetch('https://discord.com/api/v10/users/@me/guilds', { headers: { Authorization: 'Bot '+token }});
    if(!res.ok) throw new Error('guilds => '+res.status);
    const guilds = await res.json();
    el('guildsCount').textContent = `Ø¹Ø¯Ø¯ Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª: ${Array.isArray(guilds) ? guilds.length : 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}`;
  } catch(err){
    el('guildsCount').textContent = 'Ø¹Ø¯Ø¯ Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª: ÙØ´Ù„ Ø¬Ù„Ø¨ ('+err+')';
  }

  // 3) commands
  try {
    const res = await fetch(`https://discord.com/api/v10/applications/${user.id}/commands`, { headers: { Authorization: 'Bot '+token }});
    if(!res.ok) {
      el('commands').textContent = 'ÙØ´Ù„ Ø¬Ù„Ø¨ Ø£ÙˆØ§Ù…Ø±: ' + res.status + ' ' + res.statusText;
    } else {
      const cmds = await res.json();
      if(Array.isArray(cmds) && cmds.length>0) {
        el('commands').textContent = cmds.map(c => `/${c.name} â†’ ${c.description || '(Ø¨Ø¯ÙˆÙ† ÙˆØµÙ)'}\n`).join('');
        // Ø­ÙØ¸ Ù„Ù„Ø£Ø³ØªØ®Ø¯Ø§Ù… Ù„Ø§Ø­Ù‚Ø§Ù‹
        window.__BOT_COMMANDS = cmds;
      } else el('commands').textContent = 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ÙˆØ§Ù…Ø± Ù…Ø³Ø¬Ù„Ø©';
    }
  } catch(err){
    el('commands').textContent = 'Ø®Ø·Ø£ Ø¨Ø¬Ù„Ø¨ Ø§Ù„Ø£ÙˆØ§Ù…Ø±: '+err;
  }

  // 4) gateway/bot
  try {
    const res = await fetch('https://discord.com/api/v10/gateway/bot', { headers: { Authorization: 'Bot '+token }});
    const g = await res.json();
    el('gateway').textContent = JSON.stringify(g,null,2);
  } catch(err){
    el('gateway').textContent = 'ÙØ´Ù„ Ø¬Ù„Ø¨ gateway: '+err;
  }

  // 5) application info (best-effort)
  try {
    const res = await fetch(`https://discord.com/api/v10/oauth2/applications/${user.id}`, { headers: { Authorization: 'Bot '+token }});
    if(res.ok) {
      const app = await res.json();
      el('appInfo').textContent = JSON.stringify(app,null,2);
      if(app.owner) el('botName').textContent += ` (Owner: ${app.owner.username || app.owner.id})`;
    } else {
      el('appInfo').textContent = `Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ (${res.status}) â€” Ù‚Ø¯ Ù„Ø§ ØªÙƒÙˆÙ† ØµÙ„Ø§Ø­ÙŠØ© ÙƒØ§ÙÙŠØ©.`;
    }
  } catch(err){
    el('appInfo').textContent = 'Ø®Ø·Ø£ Ø¬Ù„Ø¨ Application: '+err;
  }

  // 6) Ù…Ø­Ø§ÙˆÙ„Ø© ÙƒØ´Ù Ø§Ù„Ø¨Ø±ÙŠÙÙƒØ³ Ø¥Ø°Ø§ Ø£Ø¹Ø·ÙŠØª Guild+Channel
  const guildId = el('guildId').value.trim();
  const channelId = el('channelId').value.trim();
  if(guildId && channelId){
    el('prefixResult').textContent = 'Ø¬Ø§Ø±Ù Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© â€” Ù‡Ø°Ø§ Ù‚Ø¯ ÙŠØ±Ø³Ù„ Ø±Ø³Ø§Ø¦Ù„ ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ù†Ø§Ø©...';
    const detected = await tryDetectPrefix(token, user.id, channelId);
    if(detected) {
      el('prefixResult').textContent = `ØªÙ… Ø§Ù„ÙƒØ´Ù: prefix = "${detected.prefix}" Ø¹Ø¨Ø± Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø£Ù…Ø± "${detected.tested}"\nØ±Ø¯ Ø§Ù„Ø¨ÙˆØª:\n${detected.reply}`;
      el('prefix').textContent = `Ø¨Ø±ÙŠÙÙƒØ³ (Ù…ÙƒØªØ´Ù): ${detected.prefix}`;
    } else {
      el('prefixResult').textContent = 'Ù„Ù… ÙŠØªÙ… Ø§Ù„ÙƒØ´Ù Ø¹Ù† Ø¨Ø±ÙŠÙÙƒØ³ Ù…Ø¹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©.';
    }
  } else {
    el('prefixResult').textContent = 'Ù„Ù… ØªÙØ²ÙˆØ¯ Guild ID Ùˆ/Ø£Ùˆ Channel ID â€” Ø§Ù„ÙƒØ´Ù Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ø¨Ø±ÙŠÙÙƒØ³ Ù…Ø¹Ø·Ù„.';
  }
}

async function tryDetectPrefix(token, targetBotId, channelId){
  // Ø³ÙŠØ­Ø§ÙˆÙ„ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ø¦Ù„ ØªØ¬Ø±ÙŠØ¨ÙŠØ© ÙˆÙŠÙØ­Øµ Ø±Ø¯ÙˆØ¯ Ø§Ù„Ø¨ÙˆØª Ø§Ù„Ù‡Ø¯Ù
  // Ù…Ù„Ø§Ø­Ø¸Ø©: Ù‚Ø¯ ØªÙ…Ù†Ø¹ Ù…ØªØµÙØ­Ø§Øª CORS Ù‡Ø°Ù‡ Ø§Ù„Ø·Ù„Ø¨Ø§ØªØ› Ù„Ùˆ Ø¸Ù‡Ø± Ø®Ø·Ø£ CORS Ø§Ø³ØªØ®Ø¯Ù… backend.
  for(const prefix of tryPrefixes){
    for(const cmd of tryCommands){
      const content = `${prefix}${cmd}`;
      try {
        // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ù†Ø§Ø©
        const post = await fetch(`https://discord.com/api/v10/channels/${channelId}/messages`, {
          method:'POST',
          headers:{
            Authorization: 'Bot '+token,
            'Content-Type':'application/json'
          },
          body: JSON.stringify({content})
        });
        if(!post.ok) {
          // Ø­Ø°Ù Ø±Ø³Ø§Ù„Ø© ØºÙŠØ± Ø¶Ø±ÙˆØ±ÙŠØŒ Ù„ÙƒÙ† Ù†ÙƒÙ…Ù„
          // ÙÙŠ Ø¨Ø¹Ø¶ Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø³ØªØ¹ÙˆØ¯ 403/401 Ø¥Ø°Ø§ Ø§Ù„ØªÙˆÙƒÙ† Ù„Ø§ ÙŠÙ…Ù„Ùƒ ØµÙ„Ø§Ø­ÙŠØ©
        } else {
          const posted = await post.json();
          // Ø§Ù„Ø¢Ù† Ù†Ù†ØªØ¸Ø± Ù„Ø±Ø¯ÙˆØ¯ Ø§Ù„Ø¨ÙˆØª Ø§Ù„Ù‡Ø¯Ù ÙÙŠ Ù†ÙØ³ Ø§Ù„Ù‚Ù†Ø§Ø© Ø¹Ø¨Ø± GET messages last few
          // (REST Ù„Ø§ ÙŠØ¯Ø¹Ù… ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ author Ø¨Ø³Ù‡ÙˆÙ„Ø© Ø¨Ø¯ÙˆÙ† Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„)
          // Ø³Ù†Ø¬Ø±Ø¨ Ù†Ù‚Ø±Ø£ Ø¢Ø®Ø± 10 Ø±Ø³Ø§Ø¦Ù„ ÙˆÙ†Ø¨Ø­Ø« Ø¹Ù† Ø±Ø³Ø§Ù„Ø© Ù…Ù† targetBotId
          await sleep(800); // Ø§Ù†ØªØ¸Ø± Ø±Ø¯ Ù…Ø­ØªÙ…Ù„
          const msgsRes = await fetch(`https://discord.com/api/v10/channels/${channelId}/messages?limit=10`, {
            headers: { Authorization: 'Bot '+token }
          });
          if(msgsRes.ok){
            const msgs = await msgsRes.json();
            const reply = msgs.find(m => m.author && m.author.id === targetBotId && m.id !== posted.id);
            if(reply){
              // Ù†Ø­Ø§ÙˆÙ„ Ø­Ø°Ù Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ù„ØªØ®ÙÙŠÙ Ø§Ù„ÙÙˆØ¶Ù‰
              try { await fetch(`https://discord.com/api/v10/channels/${channelId}/messages/${posted.id}`, { method:'DELETE', headers:{ Authorization:'Bot '+token } }); } catch(e){}
              return { prefix, tested:cmd, reply: reply.content || JSON.stringify(reply) };
            } else {
              // Ø­Ø°Ù Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ù„Ùˆ Ù†Ù‚Ø¯Ø±
              try { await fetch(`https://discord.com/api/v10/channels/${channelId}/messages/${posted.id}`, { method:'DELETE', headers:{ Authorization:'Bot '+token } }); } catch(e){}
            }
          }
        }
      } catch(e){
        // Ù…Ù…ÙƒÙ† ÙŠÙƒÙˆÙ† Ø®Ø·Ø£ CORS Ø£Ùˆ ØµÙ„Ø§Ø­ÙŠØ§ØªØŒ Ù†Ø±Ø¬Ø¹ null Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ Ù„Ùˆ ÙƒØ§Ù† CORS
        if(String(e).toLowerCase().includes('cors')) {
          el('prefixResult').textContent = 'Ø®Ø·Ø£ CORS Ø¹Ù†Ø¯ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ø¦Ù„ â€” Ø§Ø³ØªØ®Ø¯Ù… backend Ø¢Ù…Ù† Ø£Ùˆ Replit.';
          return null;
        }
      }
    }
  }
  return null;
}

function sleep(ms){ return new Promise(r=>setTimeout(r,ms)); }

function runCmd(){
  const input = el('cmdInput').value.trim();
  if(!window.__BOT_COMMANDS) { el('cmdOutput').textContent = 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø£ÙˆØ§Ù…Ø± Ù…Ø­ÙÙˆØ¸Ù‡.'; return; }
  const name = input.startsWith('/') ? input.slice(1) : input;
  const cmd = window.__BOT_COMMANDS.find(c => c.name === name);
  if(!cmd) { el('cmdOutput').textContent = 'Ø§Ù„Ø£Ù…Ø± ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© Slash Commands.'; return; }
  el('cmdOutput').textContent = `/${cmd.name} â†’ ${cmd.description || '(Ø¨Ø¯ÙˆÙ† ÙˆØµÙ)'}\nFull JSON:\n${JSON.stringify(cmd,null,2)}`;
}

function resetUI(){
  el('results').style.display='none';
  el('rawUser').textContent = '-';
  el('gateway').textContent = '-';
  el('commands').textContent = '-';
  el('appInfo').textContent = '-';
  el('prefixResult').textContent = 'Ù„Ù… ØªØ¨Ø¯Ø£ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø¨Ø¹Ø¯.';
  el('cmdOutput').textContent = '-';
  el('botName').textContent = '...';
  el('botId').textContent = 'ID: ...';
  el('avatar').src = '';
  el('verified').textContent = '...';
  el('guildsCount').textContent = 'Ø¹Ø¯Ø¯ Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª: ...';
  el('prefix').textContent = 'Ø¨Ø±ÙŠÙÙƒØ³ (Ù…ÙƒØªØ´Ù/ØªÙ‚Ø¯ÙŠØ±ÙŠ): ...';
}
</script>
</body>
</html>