<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>تسجيل الدخول - DRAGON COIN</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Cairo',sans-serif;transition:0.3s;}
body{background-color:#0d1117;color:#fff;display:flex;justify-content:center;align-items:center;height:100vh;}
.container{background:#161b22;padding:30px;border-radius:15px;width:90%;max-width:400px;text-align:center;box-shadow:0 0 15px rgba(0,0,0,0.4);border:1px solid #30363d;}
h1{color:#ff5555;margin-bottom:20px;}
input{width:100%;padding:12px;margin:8px 0;border:none;border-radius:8px;background:#21262d;color:#fff;}
input:focus{outline:none;border:1px solid #ff5555;}
button{width:100%;padding:12px;margin:10px 0;background:#ff5555;color:#fff;border:none;border-radius:8px;font-size:16px;cursor:pointer;}
button:hover{background:#cc4444;}
.linkBtn{background:#21262d;color:#fff;}
.linkBtn:hover{background:#30363d;}
.toggle,.langBtn{background-color:#21262d;margin-top:10px;color:#fff;}
.toggle:hover,.langBtn:hover{background-color:#30363d;}
.light-mode{background-color:#f4f4f4;color:#000;}
.light-mode .container{background:#fff;border-color:#ccc;color:#000;}
.light-mode input{background:#eee;color:#000;}
.light-mode button{background:#ff5555;color:#fff;}
.light-mode .toggle,.light-mode .langBtn{background-color:#ddd;color:#000;}
.light-mode h1{color:#ff5555;}
</style>
</head>
<body>
<div class="container">
  <h1 id="titleText">تسجيل الدخول</h1>
  <input type="text" id="username" placeholder="اسم المستخدم">
  <input type="password" id="password" placeholder="كلمة المرور">
  <label style="display:flex;align-items:center;justify-content:left;font-size:14px;margin-top:5px;">
    <input type="checkbox" id="rememberMe" style="margin-right:5px;"> تذكرني
  </label>
  <button onclick="login()">دخول</button>
  <button class="linkBtn" onclick="showRegister()">إنشاء حساب جديد</button>
  <button class="toggle" onclick="toggleMode()">🌙 / ☀️</button>
  <button class="langBtn" onclick="toggleLanguage()">ع / E</button>
</div>

<script>
// الوضع الداكن
let darkMode = localStorage.getItem('darkMode')==='true';
applyMode();

// اللغة
let lang = localStorage.getItem('lang') || 'ar';
applyLanguage();

// المستخدمين
let users = JSON.parse(localStorage.getItem('users')||'{}');

function login(){
  const user=document.getElementById('username').value.trim();
  const pass=document.getElementById('password').value;
  const remember=document.getElementById('rememberMe').checked;

  if(!user||!pass){alert(lang==='ar'?'الرجاء تعبئة جميع الحقول':'Please fill all fields'); return;}
  if(!users[user]){alert(lang==='ar'?'❌ المستخدم غير موجود':'User does not exist'); return;}
  if(users[user]!==pass){alert(lang==='ar'?'❌ كلمة المرور غير صحيحة':'Incorrect password'); return;}
  
  localStorage.setItem('username',user);
  localStorage.setItem('loggedIn','true');
  if(remember) localStorage.setItem('rememberedUser',user);
  window.location.href="dashboard.html";
}

function showRegister(){
  const user=prompt(lang==='ar'?'ادخل اسم المستخدم الجديد':'Enter new username');
  if(!user){alert(lang==='ar'?'الاسم ناقص':'Name missing'); return;}
  if(users[user]){alert(lang==='ar'?'اسم المستخدم موجود بالفعل':'Username already exists'); return;}
  const pass=prompt(lang==='ar'?'ادخل كلمة المرور':'Enter password');
  if(!pass){alert(lang==='ar'?'كلمة المرور ناقصة':'Password missing'); return;}
  const pass2=prompt(lang==='ar'?'أكد كلمة المرور':'Confirm password');
  if(pass!==pass2){alert(lang==='ar'?'كلمات المرور غير متطابقة':'Passwords do not match'); return;}
  users[user]=pass;
  localStorage.setItem('users',JSON.stringify(users));
  alert(lang==='ar'?'✅ تم إنشاء الحساب بنجاح':'Account created successfully');
}

function toggleMode(){darkMode=!darkMode;localStorage.setItem('darkMode',darkMode);applyMode();}
function applyMode(){if(darkMode){document.body.classList.remove('light-mode');}else{document.body.classList.add('light-mode');}}

// اللغة
function toggleLanguage(){lang=(lang==='ar')?'en':'ar';localStorage.setItem('lang',lang);applyLanguage();}
function applyLanguage(){
  if(lang==='ar'){
    document.getElementById('titleText').textContent='تسجيل الدخول';
  } else {
    document.getElementById('titleText').textContent='Login';
  }
}

// لو كان المستخدم متذكر
const remembered = localStorage.getItem('rememberedUser');
if(remembered){
  document.getElementById('username').value=remembered;
  document.getElementById('rememberMe').checked=true;
}
</script>
</body>
</html>